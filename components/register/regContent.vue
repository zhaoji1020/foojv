<template>    <div class="reg-content">        <div class="main-content">            <div class="main-content-top clearfix">                 <span>创建账号</span>                <nuxt-link to="/login">已有账号，立即登录</nuxt-link>            </div>            <div class="main-content-middle">                <form @submit.prevent>                    <div class="phone">                        <i class="iconfont icon-z-phone"></i>                        <input type="tel" placeholder="请输入手机号" v-model="formData.mobile" autofocus="true" @keyup="testMobile">                    </div>                    <div class="error-msg" v-text="phoneError" v-show="phoneError"></div>                    <div class="verify clearfix">                        <i class="iconfont icon-mima"></i>                        <input type="text" placeholder="请输入短信验证码" class="fll verify-input" v-model="formData.verify">                        <button class="flr" :disabled="canSend" @click="sendVerify" v-text="btnText">                        </button>                    </div>                    <div class="error-msg" v-text="smsError" v-show="smsError" ></div>                    <div class="password">                        <i class="iconfont icon-mima"></i>                        <input type="text" placeholder="请输入6-18位密码" v-model="formData.password" @keyup="testPwd">                    </div>                    <div class="error-msg" v-text="pwdError" v-show="pwdError"></div>                    <div class="name">                        <i class="iconfont icon-nicheng"></i>                        <input type="text" placeholder="请输入昵称" v-model="formData.name" @keyup="testName">                    </div>                    <div class="error-msg" v-text="nameError" v-show="nameError" ></div>                    <div class="reg-button" @click="submit">                        <button >立即注册</button>                    </div>                </form>                <div class="agreement-link">                    <span>点击立即注册，则表示您阅读并同意遵守</span>                    <nuxt-link to="/agreement">福居网平台服务协议</nuxt-link>                </div>            </div>        </div>    </div></template><script>    import axios from '~/plugins/axios'    import md5 from 'md5'    import qs from 'qs'    export default {        name: "regContent",        data() {            return {                formData: {                    mobile: "",                    verify: "",                    password: "",                    name: ""                },                btnText: "获取验证码",                isSending: false,                canCommit: false,                phoneError: "",                smsError: "",                pwdError: "",                nameError: ""            }        },        methods: {            sendVerify() {                if(this.testMobile()){                    axios.get(`/api.php?s=Msg/send_msg/mobile/${this.formData.mobile}`).then(res => {                        this.send();                    }).catch(err => {                        alert(err)                    })                }            },            send() {                this.isSending = true;                let time = 10;                this.btnText = time + "s";                let timer = setInterval(()=> {                    time--;                    this.btnText = time + "s";                    if(time <= 0){                        clearInterval(timer)                        this.btnText = "重新获取"                        this.isSending = false;                    }                }, 1000)            },            testMobile() {                let mobileReg = /((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\d{8}$/                this.phoneError = mobileReg.test(this.formData.mobile)? "" : "请输入正确的手机号码"                return mobileReg.test(this.formData.mobile)            },            testPwd() {                let pwdReg = /^.{6,18}$/                this.pwdError = pwdReg.test(this.formData.password) ? "" : "请输入6-18位密码"            },            testName() {                let nameReg = /^.{1,20}$/                this.nameError = nameReg.test(this.formData.name)? "" : "请输入1到20个字符作为您的昵称"            },            submit() {                if(this.phoneError||this.nameError||this.pwdError||this.formData.verify.length<4){                    return                }                axios.get(`/api.php?s=Msg/verify/mobile/${this.formData.mobile}/verify/${this.formData.verify}`)                    .then(res => {                        console.log(res.code)                        if(res.data.code!=200){                            this.smsError = res.data.msg;                        }                        else {                            let params = {                                password: md5(md5(this.formData.password)) + "fujuwang",                                mobile: this.formData.mobile,                                name: this.formData.name                            }                            axios.post("/api.php?s=Login/register",params).then(res => {                                console.log(res)                            }).catch(err => {                            })                        }                    }).catch(err => {                        console.log(err)                })            }        },        computed: {            canSend() {                let mobile = this.formData.mobile;                let mobileReg = /((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\d{8}$/                if(mobileReg.test(mobile)&&!this.isSending){                    return false                }                else {                    return true                }            }        }    }</script><style scoped lang="scss">    @import "~/style/regContent.scss";</style>